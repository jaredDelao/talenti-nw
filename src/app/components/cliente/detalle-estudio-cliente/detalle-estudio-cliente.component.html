<app-title regresar="true" [ruta]="'/cliente/estudios-cliente'" titulo="DETALLE DE ESTUDIO"></app-title>
       
<div class="container justify-content-start mb-5" [formGroup]="form">
    <div class="alert alert-warning" role="alert" *ngIf="mostrarMensajeAlerta.id != null">{{mostrarMensajeAlerta.desc}}</div>

    <button 
            class="mt-3 mb-3 ml-3 btn-cancelar" 
            (click)="openDialog()" 
            *ngIf="mostrarMensajeAlerta.id != 1 && mostrarMensajeAlerta.id != 2 && getPerfil" 
            mat-raised-button 
            color="warn"
        >
        SOLICITAR CANCELACIÓN
    </button>
    <div class="contenido col-12 row justify-content-start">

        <div class="form-group col-lg-4 col-sm-6 col-xs-12">
            <mat-form-field>
                <input type="text" matInput placeholder="Folio" [value]="idSolicitud" disabled>
            </mat-form-field>
        </div>
        <div class="form-group col-lg-4 col-sm-6 col-xs-12">
            <mat-form-field>
                <input type="text" matInput placeholder="Nombre" formControlName="sNombres">
            </mat-form-field>
        </div>
        <div class="form-group col-lg-4 col-sm-6 col-xs-12">
            <mat-form-field>
                <input type="text" matInput placeholder="Apellidos" formControlName="sApellidos">
            </mat-form-field>
        </div>
        <div class="form-group col-lg-4 col-sm-6 col-xs-12">
            <mat-form-field>
                <input type="text" matInput placeholder="Puesto" formControlName="sPuesto">
            </mat-form-field>
        </div>
        <div class="form-group col-lg-4 col-sm-6 col-xs-12">
            <mat-form-field>
                <input type="text" matInput placeholder="Teléfono" formControlName="sTelefono">
            </mat-form-field>
        </div>
        <div class="form-group col-lg-4 col-sm-6 col-xs-12">
            <mat-form-field>
                <input type="text" matInput placeholder="NSS" formControlName="sNss">
            </mat-form-field>
        </div>
        <div class="form-group col-lg-4 col-sm-6 col-xs-12">
            <mat-form-field>
                <input type="text" matInput placeholder="CURP" formControlName="sCurp">
            </mat-form-field>
        </div>

        <!-- Mostrar por idEstudio -->
        <ng-container *ngIf="mostrarEstudiosCompletos">
        
            <div class="form-group col-lg-4 col-sm-6 col-xs-12">
                <mat-form-field>
                    <input type="text" matInput placeholder="Calle y número" formControlName="sCalleNumero">
                </mat-form-field>
            </div>
            <div class="form-group col-lg-4 col-sm-6 col-xs-12">
                <mat-form-field>
                    <input type="text" matInput placeholder="Colonia" formControlName="sColonia">
                </mat-form-field>
            </div>
            <div class="form-group col-lg-4 col-sm-6 col-xs-12">
                <mat-form-field>
                    <input type="text" matInput placeholder="CP" formControlName="sCp">
                </mat-form-field>
            </div>
            <div class="form-group col-lg-4 col-sm-6 col-xs-12">
                <mat-form-field>
                    <input type="text" matInput placeholder="Alcaldía / Municipio" formControlName="sMunicipio">
                </mat-form-field>
            </div>
            <div class="form-group col-lg-4 col-sm-6 col-xs-12">
                <mat-form-field>
                    <input type="text" matInput placeholder="Estado" formControlName="sEstado">
                </mat-form-field>
            </div>
        </ng-container>

        <div class="form-group col-lg-8 col-sm-12 col-xs-12">
            <mat-form-field>
                <mat-label>Tipo de estudio</mat-label>
                <mat-select formControlName="iIdEstudio">
                    <mat-option *ngFor="let estudios of catEstudios" [value]="estudios.iIdEstudio">
                        {{estudios.sNombreEstudio}}
                    </mat-option>
                </mat-select>
            </mat-form-field>
        </div> 

        <!-- <div class="form-group col-lg-4 col-sm-6 col-xs-12">
            <img src="../../../../../assets/images/certificado.png" width="70px">
        </div> -->
    </div>

    <div class="row col-12 mb-4">
        <button color="primary" class="btn-actualizar-datos" mat-raised-button (click)="descargarPreliminar()" *ngIf="tokenPreliminar">
            <mat-icon class="mr-2">attach_file</mat-icon>
            <span>Descargar Preliminar</span>
        </button>
    </div>

    <div class="contenido row col-12">

        <!-- Tabla estatus -->
        <app-tabla-estatus *ngIf="dataTablaEstatus.length > 0" 
            [data]="dataTablaEstatus"  
            [tipoEstudio]="tipoEstudio"
            [fechaHoraAgenda]="fechaHoraAgenda">
        </app-tabla-estatus>
        <!-- ··· -->

        <div class="contenido2 col-lg-6 col-md-6 col-sm-12 col-xs-12" *ngIf="bDictamen == '3'">
            <app-tabla-general [titulo]="'Estudio socieconómico'" [data]="datosEstudios" [idTipoEstudio]="2" [columns]="columnsEstudios"></app-tabla-general>
        </div>
        <div class="contenido2 col-lg-6 col-md-6 col-sm-12 col-xs-12" *ngIf="bComplemento == '3'">
            <app-tabla-general [titulo]="'Actualización de estudio'" [data]="datosComplemento" [idTipoEstudio]="3" [columns]="columnsComplemento"></app-tabla-general>
        </div>
    </div>

    
</div>